<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Завдання 7 – Товари із випадаючого списку</title>
<script>
    let product = ["Валіза", "Віник", "Вилка", "Журнал", "Жабка", "Жилет"];
    let quantity = [10, 50, 30, 15, 20, 5];
    let cost = [500, 25, 12, 60, 8, 120];

    let currentIndex = -1;

    // Показати кількість і вартість
    function fun1() {
        let select = document.getElementById("productSelect");
        currentIndex = select.selectedIndex;

        if (currentIndex !== -1) {
            document.getElementById("output_quantity").value = quantity[currentIndex];
            document.getElementById("output_cost").value = cost[currentIndex];
        } else {
            document.getElementById("output_quantity").value = "Товар не вибрано";
            document.getElementById("output_cost").value = "Товар не вибрано";
        }
    }

    // Підрахунок загальної вартості всіх одиниць товару на складі
    function fun2() {
        if (currentIndex !== -1) {
            let total = quantity[currentIndex] * cost[currentIndex];
            document.getElementById("output_total").value = 
                "Загальна сума для " + product[currentIndex] + " = " + total + " грн";
        } else {
            document.getElementById("output_total").value = "Спочатку виберіть товар!";
        }
    }

    // Функція покупки товару
    function buyProduct() {
        if (currentIndex === -1) {
            document.getElementById("output_total").value = "Спочатку виберіть товар!";
            return;
        }

        let userQuantity = parseInt(document.getElementById("input_buy_quantity").value);

        if (isNaN(userQuantity) || userQuantity <= 0) {
            document.getElementById("output_total").value = "Введіть коректну кількість товару!";
            return;
        }

        if (userQuantity > quantity[currentIndex]) {
            document.getElementById("output_total").value = 
                "Недостатньо товару на складі! Доступно лише " + quantity[currentIndex];
            return;
        }

        // Обчислення суми покупки
        let sum = userQuantity * cost[currentIndex];
        quantity[currentIndex] -= userQuantity; // оновлюємо склад
        document.getElementById("output_quantity").value = quantity[currentIndex]; // оновлюємо поле

        document.getElementById("output_total").value = 
            "Ви купили " + userQuantity + " шт. товару \"" + product[currentIndex] +
            "\" на суму " + sum + " грн.";
    }
</script>
</head>
<body>
<h2>Завдання 7 – Склад товарів із випадаючого списку</h2>
<form name="form1">
    Виберіть товар: 
    <select id="productSelect">
        <option>Валіза</option>
        <option>Віник</option>
        <option>Вилка</option>
        <option>Журнал</option>
        <option>Жабка</option>
        <option>Жилет</option>
    </select>
    <input type="button" value="Наявна кількість і вартість" onclick="fun1()">
    <br><br>

    Кількість на складі: <input type="text" size="30" id="output_quantity" readonly>
    Вартість за одиницю: <input type="text" size="30" id="output_cost" readonly>
    <br><br>

    <input type="button" value="Загальна сума на складі" onclick="fun2()">
    <br><br>

    Введіть кількість для покупки: 
    <input type="number" id="input_buy_quantity" min="1">
    <input type="button" value="Купити" onclick="buyProduct()">
    <br><br>

    Результат: <input type="text" size="70" id="output_total" readonly>
</form>
</body>
</html>
